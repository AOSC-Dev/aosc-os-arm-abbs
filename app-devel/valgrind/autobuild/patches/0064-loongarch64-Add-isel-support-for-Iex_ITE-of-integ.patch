From 9d8f60f791930472ef3e8b8f7886db20353133c6 Mon Sep 17 00:00:00 2001
From: Feiyang Chen <chenfeiyang@loongson.cn>
Date: Mon, 8 Aug 2022 16:42:49 +0800
Subject: [PATCH v4 064/123] loongarch64: Add isel support for Iex_ITE of
 integer expressions

---
 VEX/priv/host_loongarch64_isel.c | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/VEX/priv/host_loongarch64_isel.c b/VEX/priv/host_loongarch64_isel.c
index f12f33bff..3e37de23a 100644
--- a/VEX/priv/host_loongarch64_isel.c
+++ b/VEX/priv/host_loongarch64_isel.c
@@ -1400,6 +1400,15 @@ static HReg iselIntExpr_R_wrk ( ISelEnv* env, IRExpr* e )
          return dst;
       }
 
+      case Iex_ITE: {
+         HReg   r0 = iselIntExpr_R(env, e->Iex.ITE.iffalse);
+         HReg   r1 = iselIntExpr_R(env, e->Iex.ITE.iftrue);
+         HReg cond = iselCondCode_R(env, e->Iex.ITE.cond);
+         HReg  dst = newVRegI(env);
+         addInstr(env, LOONGARCH64Instr_CMove(cond, r0, r1, dst, True));
+         return dst;
+      }
+
       default:
          break;
    }
-- 
2.39.1

