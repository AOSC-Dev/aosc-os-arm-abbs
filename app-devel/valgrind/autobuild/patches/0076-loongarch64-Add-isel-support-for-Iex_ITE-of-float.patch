From 3a53f07b6a61acfcbbda97c46dc7094728597a5d Mon Sep 17 00:00:00 2001
From: Feiyang Chen <chenfeiyang@loongson.cn>
Date: Mon, 8 Aug 2022 17:11:56 +0800
Subject: [PATCH v4 076/123] loongarch64: Add isel support for Iex_ITE of
 floating point expressions

---
 VEX/priv/host_loongarch64_isel.c | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/VEX/priv/host_loongarch64_isel.c b/VEX/priv/host_loongarch64_isel.c
index 28ff4e400..8b0fcbeba 100644
--- a/VEX/priv/host_loongarch64_isel.c
+++ b/VEX/priv/host_loongarch64_isel.c
@@ -2153,6 +2153,15 @@ static HReg iselFltExpr_wrk ( ISelEnv* env, IRExpr* e )
          }
       }
 
+      case Iex_ITE: {
+         HReg   r0 = iselFltExpr(env, e->Iex.ITE.iffalse);
+         HReg   r1 = iselFltExpr(env, e->Iex.ITE.iftrue);
+         HReg cond = iselCondCode_R(env, e->Iex.ITE.cond);
+         HReg  dst = newVRegF(env);
+         addInstr(env, LOONGARCH64Instr_CMove(cond, r0, r1, dst, False));
+         return dst;
+      }
+
       default:
          break;
    }
-- 
2.39.1

