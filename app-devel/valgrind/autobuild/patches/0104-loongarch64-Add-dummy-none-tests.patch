From bf423284e03ac116025a29eb3b21ab0727d392fa Mon Sep 17 00:00:00 2001
From: Feiyang Chen <chenfeiyang@loongson.cn>
Date: Mon, 28 Mar 2022 09:39:41 +0800
Subject: [PATCH v4 104/123] loongarch64: Add dummy none tests

---
 .gitignore                                | 15 ++++++++++++++
 configure.ac                              |  1 +
 none/tests/Makefile.am                    |  9 +++++---
 none/tests/allexec_prepare_prereq         | 13 ++++++------
 none/tests/loongarch64/Makefile.am        | 25 +++++++++++++++++++++++
 none/tests/loongarch64/allexec.c          |  1 +
 none/tests/loongarch64/atomic.c           |  5 +++++
 none/tests/loongarch64/atomic.stderr.exp  |  0
 none/tests/loongarch64/atomic.stdout.exp  |  0
 none/tests/loongarch64/atomic.vgtest      |  2 ++
 none/tests/loongarch64/branch.c           |  5 +++++
 none/tests/loongarch64/branch.stderr.exp  |  0
 none/tests/loongarch64/branch.stdout.exp  |  0
 none/tests/loongarch64/branch.vgtest      |  2 ++
 none/tests/loongarch64/filter_stderr      |  3 +++
 none/tests/loongarch64/float.c            |  5 +++++
 none/tests/loongarch64/float.stderr.exp   |  0
 none/tests/loongarch64/float.stdout.exp   |  0
 none/tests/loongarch64/float.vgtest       |  2 ++
 none/tests/loongarch64/integer.c          |  5 +++++
 none/tests/loongarch64/integer.stderr.exp |  0
 none/tests/loongarch64/integer.stdout.exp |  0
 none/tests/loongarch64/integer.vgtest     |  2 ++
 none/tests/loongarch64/memory.c           |  5 +++++
 none/tests/loongarch64/memory.stderr.exp  |  0
 none/tests/loongarch64/memory.stdout.exp  |  0
 none/tests/loongarch64/memory.vgtest      |  2 ++
 27 files changed, 93 insertions(+), 9 deletions(-)
 create mode 100644 none/tests/loongarch64/Makefile.am
 create mode 120000 none/tests/loongarch64/allexec.c
 create mode 100644 none/tests/loongarch64/atomic.c
 create mode 100644 none/tests/loongarch64/atomic.stderr.exp
 create mode 100644 none/tests/loongarch64/atomic.stdout.exp
 create mode 100644 none/tests/loongarch64/atomic.vgtest
 create mode 100644 none/tests/loongarch64/branch.c
 create mode 100644 none/tests/loongarch64/branch.stderr.exp
 create mode 100644 none/tests/loongarch64/branch.stdout.exp
 create mode 100644 none/tests/loongarch64/branch.vgtest
 create mode 100755 none/tests/loongarch64/filter_stderr
 create mode 100644 none/tests/loongarch64/float.c
 create mode 100644 none/tests/loongarch64/float.stderr.exp
 create mode 100644 none/tests/loongarch64/float.stdout.exp
 create mode 100644 none/tests/loongarch64/float.vgtest
 create mode 100644 none/tests/loongarch64/integer.c
 create mode 100644 none/tests/loongarch64/integer.stderr.exp
 create mode 100644 none/tests/loongarch64/integer.stdout.exp
 create mode 100644 none/tests/loongarch64/integer.vgtest
 create mode 100644 none/tests/loongarch64/memory.c
 create mode 100644 none/tests/loongarch64/memory.stderr.exp
 create mode 100644 none/tests/loongarch64/memory.stdout.exp
 create mode 100644 none/tests/loongarch64/memory.vgtest

diff --git a/.gitignore b/.gitignore
index d849e53c2..e58f18dd6 100644
--- a/.gitignore
+++ b/.gitignore
@@ -2042,6 +2042,21 @@
 /none/tests/s390x/vec2
 /none/tests/s390x/vec2_float
 
+# /none/tests/loongarch64/
+/none/tests/loongarch64/*.stderr.diff
+/none/tests/loongarch64/*.stderr.out
+/none/tests/loongarch64/*.stdout.diff
+/none/tests/loongarch64/*.stdout.out
+/none/tests/loongarch64/.deps
+/none/tests/loongarch64/Makefile
+/none/tests/loongarch64/Makefile.in
+/none/tests/loongarch64/allexec
+/none/tests/loongarch64/atomic
+/none/tests/loongarch64/branch
+/none/tests/loongarch64/float
+/none/tests/loongarch64/integer
+/none/tests/loongarch64/memory
+
 # /none/tests/scripts/
 /none/tests/scripts/*.dSYM
 /none/tests/scripts/*.so
diff --git a/configure.ac b/configure.ac
index c6bb31139..d83154e33 100755
--- a/configure.ac
+++ b/configure.ac
@@ -5435,6 +5435,7 @@ AC_CONFIG_FILES([
    none/tests/mips32/Makefile
    none/tests/mips64/Makefile
    none/tests/nanomips/Makefile
+   none/tests/loongarch64/Makefile
    none/tests/linux/Makefile
    none/tests/darwin/Makefile
    none/tests/solaris/Makefile
diff --git a/none/tests/Makefile.am b/none/tests/Makefile.am
index ee2181f2d..01edde446 100644
--- a/none/tests/Makefile.am
+++ b/none/tests/Makefile.am
@@ -35,7 +35,9 @@ endif
 if VGCONF_ARCHS_INCLUDE_NANOMIPS
 SUBDIRS += nanomips
 endif
-
+if VGCONF_ARCHS_INCLUDE_LOONGARCH64
+SUBDIRS += loongarch64
+endif
 
 # OS-specific tests
 if VGCONF_OS_IS_LINUX
@@ -75,8 +77,9 @@ SUBDIRS += x86-freebsd
 endif
 
 DIST_SUBDIRS = x86 amd64 ppc32 ppc64 arm arm64 s390x mips32 mips64 nanomips \
-               linux darwin solaris freebsd amd64-linux x86-linux amd64-darwin \
-               x86-darwin amd64-solaris x86-solaris x86-freebsd scripts .
+               loongarch64 linux darwin solaris freebsd amd64-linux x86-linux \
+					amd64-darwin x86-darwin amd64-solaris x86-solaris x86-freebsd \
+					scripts .
 
 dist_noinst_SCRIPTS = \
 	filter_cmdline0 \
diff --git a/none/tests/allexec_prepare_prereq b/none/tests/allexec_prepare_prereq
index a541f4299..49c45c7cc 100755
--- a/none/tests/allexec_prepare_prereq
+++ b/none/tests/allexec_prepare_prereq
@@ -28,11 +28,12 @@ pair()
 }
 
 
-pair x86                        amd64
-pair ppc32                      ppc64
-pair s390x_unexisting_in_32bits s390x
-pair arm                        arm64
-pair mips32                     mips64
-pair nanomips                   nanoMIPS_unexisting_in_64bits
+pair x86                            amd64
+pair ppc32                          ppc64
+pair s390x_unexisting_in_32bits     s390x
+pair arm                            arm64
+pair mips32                         mips64
+pair nanomips                       nanoMIPS_unexisting_in_64bits
+pair loongarch_unexisting_in_32bits loongarch64
 
 exit 0
diff --git a/none/tests/loongarch64/Makefile.am b/none/tests/loongarch64/Makefile.am
new file mode 100644
index 000000000..2878271a4
--- /dev/null
+++ b/none/tests/loongarch64/Makefile.am
@@ -0,0 +1,25 @@
+
+include $(top_srcdir)/Makefile.tool-tests.am
+
+dist_noinst_SCRIPTS = filter_stderr
+
+EXTRA_DIST = \
+	atomic.stdout.exp atomic.stderr.exp atomic.vgtest \
+	branch.stdout.exp branch.stderr.exp branch.vgtest \
+	float.stdout.exp float.stderr.exp float.vgtest \
+	integer.stdout.exp integer.stderr.exp integer.vgtest \
+	memory.stdout.exp memory.stderr.exp memory.vgtest
+
+check_PROGRAMS = \
+	allexec \
+	atomic \
+	branch \
+	float \
+	integer \
+	memory
+
+AM_CFLAGS    += @FLAG_M64@
+AM_CXXFLAGS  += @FLAG_M64@
+AM_CCASFLAGS += @FLAG_M64@
+
+allexec_CFLAGS = $(AM_CFLAGS) @FLAG_W_NO_NONNULL@
diff --git a/none/tests/loongarch64/allexec.c b/none/tests/loongarch64/allexec.c
new file mode 120000
index 000000000..6d6a9cf28
--- /dev/null
+++ b/none/tests/loongarch64/allexec.c
@@ -0,0 +1 @@
+../allexec.c
\ No newline at end of file
diff --git a/none/tests/loongarch64/atomic.c b/none/tests/loongarch64/atomic.c
new file mode 100644
index 000000000..f93ad3f9a
--- /dev/null
+++ b/none/tests/loongarch64/atomic.c
@@ -0,0 +1,5 @@
+int main(void)
+{
+   /* TODO */
+   return 0;
+}
diff --git a/none/tests/loongarch64/atomic.stderr.exp b/none/tests/loongarch64/atomic.stderr.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/atomic.stdout.exp b/none/tests/loongarch64/atomic.stdout.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/atomic.vgtest b/none/tests/loongarch64/atomic.vgtest
new file mode 100644
index 000000000..51295e709
--- /dev/null
+++ b/none/tests/loongarch64/atomic.vgtest
@@ -0,0 +1,2 @@
+prog: atomic
+vgopts: -q
diff --git a/none/tests/loongarch64/branch.c b/none/tests/loongarch64/branch.c
new file mode 100644
index 000000000..f93ad3f9a
--- /dev/null
+++ b/none/tests/loongarch64/branch.c
@@ -0,0 +1,5 @@
+int main(void)
+{
+   /* TODO */
+   return 0;
+}
diff --git a/none/tests/loongarch64/branch.stderr.exp b/none/tests/loongarch64/branch.stderr.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/branch.stdout.exp b/none/tests/loongarch64/branch.stdout.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/branch.vgtest b/none/tests/loongarch64/branch.vgtest
new file mode 100644
index 000000000..535c05590
--- /dev/null
+++ b/none/tests/loongarch64/branch.vgtest
@@ -0,0 +1,2 @@
+prog: branch
+vgopts: -q
diff --git a/none/tests/loongarch64/filter_stderr b/none/tests/loongarch64/filter_stderr
new file mode 100755
index 000000000..0ae9313a9
--- /dev/null
+++ b/none/tests/loongarch64/filter_stderr
@@ -0,0 +1,3 @@
+#! /bin/sh
+
+../filter_stderr
diff --git a/none/tests/loongarch64/float.c b/none/tests/loongarch64/float.c
new file mode 100644
index 000000000..f93ad3f9a
--- /dev/null
+++ b/none/tests/loongarch64/float.c
@@ -0,0 +1,5 @@
+int main(void)
+{
+   /* TODO */
+   return 0;
+}
diff --git a/none/tests/loongarch64/float.stderr.exp b/none/tests/loongarch64/float.stderr.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/float.stdout.exp b/none/tests/loongarch64/float.stdout.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/float.vgtest b/none/tests/loongarch64/float.vgtest
new file mode 100644
index 000000000..6f6c9c93c
--- /dev/null
+++ b/none/tests/loongarch64/float.vgtest
@@ -0,0 +1,2 @@
+prog: float
+vgopts: -q
diff --git a/none/tests/loongarch64/integer.c b/none/tests/loongarch64/integer.c
new file mode 100644
index 000000000..f93ad3f9a
--- /dev/null
+++ b/none/tests/loongarch64/integer.c
@@ -0,0 +1,5 @@
+int main(void)
+{
+   /* TODO */
+   return 0;
+}
diff --git a/none/tests/loongarch64/integer.stderr.exp b/none/tests/loongarch64/integer.stderr.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/integer.stdout.exp b/none/tests/loongarch64/integer.stdout.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/integer.vgtest b/none/tests/loongarch64/integer.vgtest
new file mode 100644
index 000000000..daa059178
--- /dev/null
+++ b/none/tests/loongarch64/integer.vgtest
@@ -0,0 +1,2 @@
+prog: integer
+vgopts: -q
diff --git a/none/tests/loongarch64/memory.c b/none/tests/loongarch64/memory.c
new file mode 100644
index 000000000..f93ad3f9a
--- /dev/null
+++ b/none/tests/loongarch64/memory.c
@@ -0,0 +1,5 @@
+int main(void)
+{
+   /* TODO */
+   return 0;
+}
diff --git a/none/tests/loongarch64/memory.stderr.exp b/none/tests/loongarch64/memory.stderr.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/memory.stdout.exp b/none/tests/loongarch64/memory.stdout.exp
new file mode 100644
index 000000000..e69de29bb
diff --git a/none/tests/loongarch64/memory.vgtest b/none/tests/loongarch64/memory.vgtest
new file mode 100644
index 000000000..be6895e8f
--- /dev/null
+++ b/none/tests/loongarch64/memory.vgtest
@@ -0,0 +1,2 @@
+prog: memory
+vgopts: -q
-- 
2.39.1

