abinfo "Installing Dependencies ..."
npm install 

abinfo " Building lx-music-desktop  ..."
npm run build
npm run pack:dir

abinfo "Installing lx-music-desktop ..."
if ab_match_arch arm64 ; then
	ELECTRONDIR="$SRCDIR"/build/linux-arm64-unpacked
else
	ELECTRONDIR="$SRCDIR"/build/linux-unpacked
fi
# NOTE no trailing slash here.
mkdir -pv "$PKGDIR"/usr/lib/lx-music-desktop
cp -av "$ELECTRONDIR"/* "$PKGDIR"/usr/lib/lx-music-desktop
chmod -v 755 "$PKGDIR"/usr/lib/lx-music-desktop/lx-music-desktop
mkdir -pv "$PKGDIR"/usr/share/doc/lx-music-desktop
cp -av "$ELECTRONDIR"/*LICENSE* "$PKGDIR"/usr/share/doc/lx-music-desktop
cp -av "$SRCDIR"/CHANGELOG.md "$PKGDIR"/usr/share/doc/lx-music-desktop

abinfo "Marking any shared libraries as executable ..."
find "$PKGDIR" -name '*.so.*' -exec chmod -v 0755 {} \;
find "$PKGDIR" -name '*chrome*' -exec chmod -v 0755 {} \;
find "$PKGDIR" -name '*.bin' -exec chmod -v 0755 {} \;
