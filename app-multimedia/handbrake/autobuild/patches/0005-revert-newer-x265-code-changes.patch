diff --git a/libhb/encx265.c b/libhb/encx265.c
index 0b15838ac..94085426d 100644
--- a/libhb/encx265.c
+++ b/libhb/encx265.c
@@ -463,10 +463,10 @@ int encx265Init(hb_work_object_t *w, hb_job_t *job)
     /* statsfile (but not 2-pass) */
     if (param->logLevel >= X265_LOG_DEBUG)
     {
-        if (param->csvfn[0] == '\0')
+        if (param->csvfn == NULL)
         {
             pv->csvfn = hb_get_temporary_filename("x265.csv");
-            snprintf(param->csvfn, X265_MAX_STRING_SIZE, "%s", pv->csvfn);
+            param->csvfn = strdup(pv->csvfn);
         }
         else
         {
@@ -688,7 +688,6 @@ static hb_buffer_t* x265_encode(hb_work_object_t *w, hb_buffer_t *in)
     hb_work_private_t *pv = w->private_data;
     hb_job_t *job         = pv->job;
     x265_picture pic_in, pic_out;
-
     x265_nal *nal;
     uint32_t nnal;
     int ret;
