PKGNAME=clamav
PKGSEC=admin
PKGDEP="bzip2 curl json-c libtool libmspack libxml2 pcre2 systemd unrar"
BUILDDEP="check doxygen rustc"
BUILDDEP__RETRO=""
BUILDDEP__ARMV4="${BUILDDEP__RETRO}"
BUILDDEP__ARMV6HF="${BUILDDEP__RETRO}"
BUILDDEP__ARMV7HF="${BUILDDEP__RETRO}"
BUILDDEP__I486="${BUILDDEP__RETRO}"
BUILDDEP__LOONGSON2F="${BUILDDEP__RETRO}"
BUILDDEP__M68K="${BUILDDEP__RETRO}"
BUILDDEP__POWERPC="${BUILDDEP__RETRO}"
BUILDDEP__PPC64="${BUILDDEP__RETRO}"
PKGDES="Anti-virus toolkit for Unix"

CMAKE_AFTER="-DAPP_CONFIG_DIRECTORY=/etc/clamav \
             -DCLAMAV_USER=clamav \
             -DCLAMAV_GROUP=clamav \
             -DBYTECODE_RUNTIME=interpreter \
             -DOPTIMIZE=ON \
             -DENABLE_WERROR=OFF \
             -DENABLE_EXPERIMENTAL=OFF \
             -DENABLE_FRESHCLAM_DNS_FIX=ON \
             -DENABLE_FRESHCLAM_NO_CACHE=OFF \
             -DENABLE_EXTERNAL_MSPACK=ON \
             -DENABLE_JSON_SHARED=ON \
             -DENABLE_APP=ON \
             -DENABLE_MILTER=OFF \
             -DENABLE_CLAMONACC=ON \
             -DENABLE_MAN_PAGES=ON \
             -DENABLE_DOXYGEN=ON \
             -DENABLE_EXAMPLES=ON \
             -DENABLE_TESTS=OFF \
             -DENABLE_LIBCLAMAV_ONLY=OFF \
             -DENABLE_STATIC_LIB=OFF \
             -DENABLE_SHARED_LIB=ON \
             -DENABLE_UNRAR=ON \
             -DENABLE_SYSTEMD=ON"
CMAKE_AFTER__RETRO=" \
             ${CMAKE_AFTER} \
             -DENABLE_DOXYGEN=OFF \
             -DENABLE_EXAMPLES=OFF"
CMAKE_AFTER__ARMV4="${CMAKE_AFTER__RETRO}"
CMAKE_AFTER__ARMV6HF="${CMAKE_AFTER__RETRO}"
CMAKE_AFTER__ARMV7HF="${CMAKE_AFTER__RETRO}"
CMAKE_AFTER__I486="${CMAKE_AFTER__RETRO}"
CMAKE_AFTER__LOONGSON2F="${CMAKE_AFTER__RETRO}"
CMAKE_AFTER__M68K="${CMAKE_AFTER__RETRO}"
CMAKE_AFTER__POWERPC="${CMAKE_AFTER__RETRO}"
CMAKE_AFTER__PPC64="${CMAKE_AFTER__RETRO}"

# FIXME: qemu: uncaught target signal 11 (Segmentation fault) - core dumped
FAIL_ARCH="mips64r6el"
