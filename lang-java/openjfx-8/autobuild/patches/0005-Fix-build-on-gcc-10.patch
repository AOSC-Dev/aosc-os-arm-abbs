From 4df662631696166a0ec3fffadd2795534c377624 Mon Sep 17 00:00:00 2001
From: Jiajie Chen <c@jia.je>
Date: Tue, 13 Feb 2024 21:02:32 -0800
Subject: [PATCH 5/6] Fix build on gcc 10

---
 .../fxpackager/src/main/native/library/common/PosixPlatform.cpp | 2 +-
 .../native/gstreamer/projects/linux/gstreamer-lite/Makefile     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/fxpackager/src/main/native/library/common/PosixPlatform.cpp b/modules/fxpackager/src/main/native/library/common/PosixPlatform.cpp
index 40f83f25..12ca8fb8 100644
--- a/modules/fxpackager/src/main/native/library/common/PosixPlatform.cpp
+++ b/modules/fxpackager/src/main/native/library/common/PosixPlatform.cpp
@@ -43,7 +43,7 @@
 #include <sys/types.h>
 #include <sys/wait.h>
 #include <unistd.h>
-#include <sys/sysctl.h>
+#include <linux/sysctl.h>
 #include <iostream>
 #include <dlfcn.h>
 #include <signal.h>
diff --git a/modules/media/src/main/native/gstreamer/projects/linux/gstreamer-lite/Makefile b/modules/media/src/main/native/gstreamer/projects/linux/gstreamer-lite/Makefile
index 8634b559..97a9dd9d 100644
--- a/modules/media/src/main/native/gstreamer/projects/linux/gstreamer-lite/Makefile
+++ b/modules/media/src/main/native/gstreamer/projects/linux/gstreamer-lite/Makefile
@@ -56,7 +56,7 @@ CFLAGS =-fPIC                   \
         -DGST_DISABLE_GST_DEBUG \
         -DGST_DISABLE_LOADSAVE  \
         -DG_DISABLE_DEPRECATED   \
-        -ffunction-sections -fdata-sections
+        -ffunction-sections -fdata-sections -fcommon
 
 ifeq ($(BUILD_TYPE), Release)
     CFLAGS += -Os
-- 
2.43.0

