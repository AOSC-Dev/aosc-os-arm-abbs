##### Control part variables
OPENJDK_SUFFIX="-21"

abinfo "Generating postinst scripts ..."

printf 'update-alternatives --install /usr/lib/java java /usr/lib/java%s 50' "$OPENJDK_SUFFIX" >>"$SRCDIR/autobuild/postinst"

for i in "$PKGDIR"/usr/lib/java"$OPENJDK_SUFFIX"/bin/*; do
    BIN="$(basename "$i")"
    if [[ "$BIN" == "java" ]]; then
        printf ' --slave /usr/bin/java java-bin /usr/lib/java%s/bin/java' "$OPENJDK_SUFFIX" >>"$SRCDIR/autobuild/postinst"
    else
        printf ' --slave /usr/bin/%s %s /usr/lib/java%s/bin/%s' "$BIN" "$BIN" "$OPENJDK_SUFFIX" "$BIN" >>"$SRCDIR/autobuild/postinst"
    fi
done

cat <<EOF >"$SRCDIR/autobuild/postrm"
if [ "\$1" != "upgrade" ]; then
    update-alternatives --remove-all java$OPENJDK_SUFFIX || true
fi
EOF

abinfo "Final postinst script:"
cat "$SRCDIR/autobuild/postinst"
