From 4ec9229436e13fd1e15164182a3ae7102840fc42 Mon Sep 17 00:00:00 2001
From: Mingcong Bai <jeffbai@aosc.io>
Date: Tue, 10 Dec 2024 16:58:56 +0800
Subject: [PATCH 216/274] AOSCOS: drm: radeon: replace CPU_LOONGSON3 with
 CPU_LOONGSON64

Per commit 30ad29bb4888 ("MIPS: Loongson: Naming style cleanup and
rework"), rename the CPU_LOONGSON3 definition as CPU_LOONGSON64.

Fixes: "AOSCOS: MIPS: workaround A1004/A1101/A1201/A1205 display issues"
Signed-off-by: Mingcong Bai <jeffbai@aosc.io>

Signed-off-by: Kexy Biscuit <kexybiscuit@aosc.io>
---
 drivers/gpu/drm/drm_crtc_helper.c   | 6 +++---
 drivers/gpu/drm/radeon/radeon_kms.c | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/drm_crtc_helper.c b/drivers/gpu/drm/drm_crtc_helper.c
index e2cc92abec9a..3f02b4c07a6a 100644
--- a/drivers/gpu/drm/drm_crtc_helper.c
+++ b/drivers/gpu/drm/drm_crtc_helper.c
@@ -886,7 +886,7 @@ static int drm_helper_choose_crtc_dpms(struct drm_crtc *crtc)
 	return dpms;
 }
 
-#ifdef CONFIG_CPU_LOONGSON3
+#ifdef CONFIG_CPU_LOONGSON64
 void turn_off_lvds(void);
 void turn_on_lvds(void);
 #endif
@@ -930,7 +930,7 @@ int drm_helper_connector_dpms(struct drm_connector *connector, int mode)
 
 	/* from off to on, do crtc then encoder */
 	if (mode < old_dpms) {
-#ifdef CONFIG_CPU_LOONGSON3
+#ifdef CONFIG_CPU_LOONGSON64
 		if(connector->connector_type == DRM_MODE_CONNECTOR_LVDS)
 			turn_on_lvds();
 #endif
@@ -947,7 +947,7 @@ int drm_helper_connector_dpms(struct drm_connector *connector, int mode)
 
 	/* from on to off, do encoder then crtc */
 	if (mode > old_dpms) {
-#ifdef CONFIG_CPU_LOONGSON3
+#ifdef CONFIG_CPU_LOONGSON64
 		if(connector->connector_type == DRM_MODE_CONNECTOR_LVDS)
 			turn_off_lvds();
 #endif
diff --git a/drivers/gpu/drm/radeon/radeon_kms.c b/drivers/gpu/drm/radeon/radeon_kms.c
index 59613adaa283..e8ae5ac84b86 100644
--- a/drivers/gpu/drm/radeon/radeon_kms.c
+++ b/drivers/gpu/drm/radeon/radeon_kms.c
@@ -88,7 +88,7 @@ void radeon_driver_unload_kms(struct drm_device *dev)
 	dev->dev_private = NULL;
 }
 
-#ifdef CONFIG_CPU_LOONGSON3
+#ifdef CONFIG_CPU_LOONGSON64
 extern void turn_on_lvds(void);
 extern void turn_off_lvds(void);
 #endif
@@ -123,7 +123,7 @@ int radeon_driver_load_kms(struct drm_device *dev, unsigned long flags)
 			rdev->agp->agp_info.aper_size *
 			1024 * 1024);
 	}
-#ifdef CONFIG_CPU_LOONGSON3
+#ifdef CONFIG_CPU_LOONGSON64
 	turn_off_lvds();
 #endif
 
@@ -162,7 +162,7 @@ int radeon_driver_load_kms(struct drm_device *dev, unsigned long flags)
 	if (r)
 		dev_err(dev->dev, "Fatal error during modeset init\n");
 
-#ifdef CONFIG_CPU_LOONGSON3
+#ifdef CONFIG_CPU_LOONGSON64
 	turn_on_lvds();
 #endif
 
-- 
2.47.1

