From 412f09914548b07d91f64c79b8a13955be60646a Mon Sep 17 00:00:00 2001
From: Kexy Biscuit <kexybiscuit@aosc.io>
Date: Thu, 31 Oct 2024 15:53:14 +0800
Subject: [PATCH 08/12] AOSCOS: Revert "copy-firmware.sh: add err() helper"

This reverts commit 97d200d75b94b1984760e0474c08be042d4d0d33.

Signed-off-by: Kexy Biscuit <kexybiscuit@aosc.io>
---
 copy-firmware.sh | 21 +++++++++++----------
 1 file changed, 11 insertions(+), 10 deletions(-)

diff --git a/copy-firmware.sh b/copy-firmware.sh
index 381bde291f19..f83b4775cd2c 100755
--- a/copy-firmware.sh
+++ b/copy-firmware.sh
@@ -11,11 +11,6 @@ compress=cat
 compext=
 destdir=
 
-err() {
-    printf "ERROR: %s\n" "$*"
-    exit 1
-}
-
 while test $# -gt 0; do
     case $1 in
         -v | --verbose)
@@ -31,7 +26,8 @@ while test $# -gt 0; do
 
         --xz)
             if test "$compext" = ".zst"; then
-                err "cannot mix XZ and ZSTD compression"
+                echo "ERROR: cannot mix XZ and ZSTD compression"
+                exit 1
             fi
             compress="xz --compress --quiet --stdout --check=crc32"
             compext=".xz"
@@ -40,7 +36,8 @@ while test $# -gt 0; do
 
         --zstd)
             if test "$compext" = ".xz"; then
-                err "cannot mix XZ and ZSTD compression"
+                echo "ERROR: cannot mix XZ and ZSTD compression"
+                exit 1
             fi
             # shellcheck disable=SC2209
             compress="zstd --compress --quiet --stdout"
@@ -50,7 +47,8 @@ while test $# -gt 0; do
 
         *)
             if test -n "$destdir"; then
-                err "unknown command-line options: $*"
+                echo "ERROR: unknown command-line options: $*"
+                exit 1
             fi
 
             destdir="$1"
@@ -60,7 +58,8 @@ while test $# -gt 0; do
 done
 
 if test -z "$destdir"; then
-    err "destination directory was not specified"
+    echo "ERROR: destination directory was not specified"
+    exit 1
 fi
 
 # shellcheck disable=SC2162 # file/folder name can include escaped symbols
@@ -116,7 +115,9 @@ done
 
 # Verify no broken symlinks
 if test "$(find "$destdir" -xtype l | wc -l)" -ne 0 ; then
-    err "Broken symlinks found:\\n$(find "$destdir" -xtype l)"
+    echo "ERROR: Broken symlinks found:"
+    find "$destdir" -xtype l
+    exit 1
 fi
 
 exit 0
-- 
2.47.0

