From f7f35dd93ab8525985280c02227746eaba6fd343 Mon Sep 17 00:00:00 2001
From: Arseny Maslennikov <ar@cs.msu.ru>
Date: Sat, 4 Mar 2023 20:26:42 +0300
Subject: [PATCH 04/12] UPSTREAM: units: Order ourselves after logins are
 possible

---
 docs/kmscon.service.in    | 2 ++
 docs/kmsconvt@.service.in | 1 +
 2 files changed, 3 insertions(+)

diff --git a/docs/kmscon.service.in b/docs/kmscon.service.in
index c29fe92..2ceb9e2 100644
--- a/docs/kmscon.service.in
+++ b/docs/kmscon.service.in
@@ -1,6 +1,8 @@
 [Unit]
 Description=KMS System Console
 Documentation=man:kmscon(1)
+After=systemd-user-sessions.service
+After=rc-local.service
 
 [Service]
 ExecStart=@bindir@/kmscon -l /bin/login
diff --git a/docs/kmsconvt@.service.in b/docs/kmsconvt@.service.in
index 84b66bf..97853cd 100644
--- a/docs/kmsconvt@.service.in
+++ b/docs/kmsconvt@.service.in
@@ -30,6 +30,7 @@ Description=KMS System Console on %I
 Documentation=man:kmscon(1)
 After=systemd-user-sessions.service
 After=plymouth-quit-wait.service
+After=rc-local.service
 Before=getty.target
 Conflicts=getty@%i.service
 OnFailure=getty@%i.service
-- 
2.47.0

