export PATH=/opt/32/bin:$PATH
export PATH="/opt/32:$PATH"
export CC="i686-pc-linux-gnu-gcc"
export CXX="i686-pc-linux-gnu-g++"
export LD="i686-pc-linux-gnu-ld"
export AR="i686-pc-linux-gnu-ar"
export AS="i686-pc-linux-gnu-as"
export PKG_CONFIG="i686-pc-linux-gnu-pkg-config"

export CCPREFIX="/opt/32/bin/i686-pc-linux-gnu-"

# -DBUILD_TIMESTRETCH=OFF: Disabled because of amd64-specific codes, 
# which leading to a FTBFS on 32-bit environment.
abinfo "Running CMakeLists.txt to generate Makefile ..."
cmake "$SRCDIR" \
        -DCMAKE_INSTALL_PREFIX=/opt/32 \
        -DCMAKE_FIND_ROOT_PATH=/opt/32 \
        -DCMAKE_BUILD_TYPE=Release \
        -DCMAKE_C_COMPILER=/opt/32/bin/i686-pc-linux-gnu-gcc \
        -DCMAKE_CXX_COMPILER=/opt/32/bin/i686-pc-linux-gnu-g++ \
        -DBUILD_TIMESTRETCH=OFF

abinfo "Building binaries ..."
cmake --build  . -v -- $ABMK $MAKE_AFTER \

abinfo "Installing binaries ..."
DESTDIR="$PKGDIR" cmake --install . 
