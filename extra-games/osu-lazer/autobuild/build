abinfo Publish osu.Desktop
# Work around the environment variable VERSION
_VERSION="${VERSION}"
unset VERSION

dotnet publish osu.Desktop/osu.Desktop.csproj -c Release -o "$PKGDIR"/usr/share/osu-lazer -r linux-x64 --self-contained

export VERSION="${_VERSION}"

abinfo Restore dependencies
cp "$PKGDIR"/usr/share/osu-lazer/x86_64/* "$PKGDIR"/usr/share/osu-lazer

abinfo Deploy files
install -Dm644 "$SRCDIR"/LICENCE "$PKGDIR"/usr/share/doc/"$PKGNAME"/LICENCE
chmod 0755 "$PKGDIR"'/usr/share/osu-lazer/osu!'
ln -s "/usr/bin/osu-lazer" "$PKGDIR"'/usr/share/osu-lazer/osu!'

install -Dm644 "$SRCDIR"/osu-lazer.png "$PKGDIR"/usr/share/pixmaps/osu-lazer.png
install -Dm644 "$SRCDIR"/RESOURCE_LICENSE "$PKGDIR"/usr/share/doc/"$PKGNAME"/RESOURCE_LICENSE
