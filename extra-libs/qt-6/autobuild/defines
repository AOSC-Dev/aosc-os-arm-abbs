PKGNAME=qt-6
PKGSEC=x11
PKGDES="Qt version 6"
PKGDEP="alsa-lib bluez cups dbus desktop-file-utils double-conversion \
        fontconfig geoclue gst-plugins-base-1-0 harfbuzz hicolor-icon-theme \
        hyphen icu libinput libjpeg-turbo libmng libpng libproxy libxkbcommon \
        libxslt mesa openal-soft pcre2 protobuf pulseaudio re2 snappy sqlite \
        srtp systemd tslib vulkan xdg-utils xcb-util-renderutil \
        xcb-util-cursor xcb-util-wm xcb-util-image xcb-util-keysyms zlib"
BUILDDEP="gtk-3 mariadb openssl postgresql unixodbc gperf ninja cmake"

ABTYPE=cmakeninja
# To query possible build options, you may want to check following files in
# Qt 6 source tree: qtbase/configure, qtbase/config_help.txt,
# qtbase/cmake/configure-cmake-mapping.md and
# qtbase/cmake/QtProcessConfigureArgs.cmake.
# It's also helpful to refer to build options used by other distributions.
CMAKE_AFTER="-DINSTALL_BINDIR=bin \
             -DINSTALL_DOCDIR=share/doc/qt6 \
             -DINSTALL_HEADERDIR=include/qt6 \
             -DINSTALL_ARCHDATADIR=lib/qt6 \
             -DINSTALL_MKSPECSDIR=lib/qt6/mkspecs \
             -DINSTALL_DATADIR=share/qt6 \
             -DINSTALL_SYSCONFDIR=/etc/xdg \
             -DINSTALL_EXAMPLESDIR=share/doc/qt6/examples \
             -DBUILD_SHARED_LIB=ON \
             -DCMAKE_INTERPROCEDURAL_OPTIMIZATION=ON \
             -DCMAKE_SKIP_RPATH=OFF \
             -DQT_BUILD_TESTS=OFF \
             -DQT_FEATURE_use_gold_linker=OFF \
             -DQT_FEATURE_reduce_relocations=OFF \
             -DQT_FEATURE_system_sqlite=ON \
             -DQT_FEATURE_system_harfbuzz=ON \
             -DQT_FEATURE_system_png=ON \
             -DQT_FEATURE_system_pcre2=ON \
             -DQT_FEATURE_system_jpeg=ON \
             -DQT_FEATURE_system_zlib=ON \
             -DINPUT_dbus=linked \
             -DINPUT_openssl=linked \
             -DQT_FEATURE_sql_psql=ON \
             -DQT_FEATURE_sql_sqlite=ON \
             -DQT_FEATURE_sql_odbc=ON \
             -DQT_FEATURE_accessibility=ON \
             -DQT_FEATURE_enable_new_dtags=ON \
             -DQT_FEATURE_fontconfig=ON \
             -DQT_FEATURE_glib=ON \
             -DQT_FEATURE_icu=ON \
             -DQT_FEATURE_journald=ON \
             -DQT_FEATURE_libinput=ON \
             -DQT_FEATURE_libproxy=ON \
             -DQT_FEATURE_vulkan=ON"

CMAKE_AFTER__AMD64=" \
             ${CMAKE_AFTER} \
             -DQT_FEATURE_sse2=ON \
             -DQT_FEATURE_sse3=ON"

CMAKE_AFTER__NOWEBENGINE=" \
             ${CMAKE_AFTER} \
             -DBUILD_qtwebengine=OFF"
CMAKE_AFTER__LOONGSON3="${CMAKE_AFTER__NOWEBENGINE}"
CMAKE_AFTER__PPC64EL="${CMAKE_AFTER__NOWEBENGINE}"
