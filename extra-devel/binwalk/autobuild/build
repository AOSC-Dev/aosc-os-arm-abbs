pkgdir=`pwd`/abdist
srcdir=`pwd`
./configure --with-python=python3 --prefix="${pkgdir}/usr"
# Workaround the gcc's bug on AOSC OS
#cd src/C/miniz && gcc -fPIC -fPIE tinfl.c -o tinfl.o && gcc -shared -fPIC -fPIE tinfl.o -o libtinfl.so
#cd ../compress && gcc -fPIC -fPIE compress42.c -o compress42.o && gcc -shared -fPIC -fPIE compress42.o -o libcompress42.so
make build
make install
python3 setup.py install -O1 --prefix="${pkgdir}/usr"
install -d "${pkgdir}/usr/share/doc/binwalk"
install -Dm 644 *.md "${pkgdir}/usr/share/doc/binwalk"
install -Dm 644 LICENSE "${pkgdir}/usr/share/licenses/binwalk/LICENSE"
